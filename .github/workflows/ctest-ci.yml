name: CI - Test ctest Utility


on:  
  push:  
    branches: [ "main" ]  

# Test ctest executable
jobs:  
  test:  
    runs-on: ubuntu-latest  

    steps:  
      - uses: actions/checkout@v4  

      # Run the test_script and gcov utilites
      - name: Run Tests 
        run: make ctest; ./test_script >test_results.txt; gcov ctest-convert.c 

      # upload the test_script output and coverage report from gcov
      - name: Upload Test Results  
        if: ${{ always() }} 
        uses: actions/upload-artifact@v4  
        with:
          name: Test Results  
          path: ./test_results.txt  
